---
import { getCollection } from "astro:content"
import { Image } from "astro:assets"

import BaseHead from "../../components/BaseHead.astro"
import Header from "../../components/Header.astro"
import Footer from "../../components/Footer.astro"
import { SITE_TITLE, SITE_DESCRIPTION } from "../../consts"

import placeholder from "../../assets/placeholder-trip.jpg"

const trips = await getCollection("trips")
---

<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>
  <body>
    <Header />
    <main class="full-width">
      <h1>Trips</h1>
      <ul>
        {
          trips
            .sort((a, b) => b.data.years[0] - a.data.years[0])
            .map(trip => (
              <li>
                <a href={`travel/${trip.id}`}>
                  <Image
                    width={400}
                    height={100}
                    src={trip.data.cover || placeholder}
                    alt={
                      trip.data.coverAlt ||
                      `A photo from the ${trip.data.title} trip`
                    }
                  />
                  <h2>{trip.data.title}</h2>
                  <h3>{trip.data.years.join(" - ")}</h3>
                </a>
              </li>
            ))
        }
      </ul>
    </main>
    <Footer />
    <style>
      ul {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        justify-items: center;
        gap: 2rem;
        margin: 0;
        padding: 0;
      }

      h1 {
        text-align: center;
        margin-bottom: 4rem;
      }

      h2 {
        font-size: 1.25rem;
        font-weight: 300;
      }

      h3 {
        font-size: 1rem;
        font-weight: 100;
      }

      li {
        list-style: none;
        transition: scale 0.15s;
      }

      li:hover {
        scale: 1.03;
      }

      a {
        display: block;
        border-radius: 10rem;
        text-decoration: none;
        color: currentColor;
      }

      img {
        aspect-ratio: 1.6;
        object-fit: cover;
      }
    </style>
  </body>
</html>
